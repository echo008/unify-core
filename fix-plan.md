# Unify-Core é¡¹ç›®ä¿®å¤è®¡åˆ’

## é¡¹ç›®çœŸå®çŠ¶æ€ (åŸºäº2025-09-06 22:15å®é™…æµ‹è¯•)
- **æœ€æ–°æ£€æŸ¥æ—¶é—´**: 2025-09-06 22:15
- **æ„å»ºçŠ¶æ€**: âœ… **Androidå¹³å°ç¼–è¯‘æˆåŠŸ** | âŒ **iOS/JS/macOSå¹³å°ç¼–è¯‘å¤±è´¥**
- **ä¸»è¦é—®é¢˜**: expect/actualæ¥å£ä¸åŒ¹é… + commonMainä¸­ä½¿ç”¨å¹³å°ç‰¹å®šAPI
- **å½±å“èŒƒå›´**: iOSã€JSã€macOSå¹³å°æ— æ³•ç¼–è¯‘ï¼ŒAndroidå¹³å°æ­£å¸¸
- **ç´§æ€¥ç¨‹åº¦**: ğŸ”´ **é«˜ä¼˜å…ˆçº§ä¿®å¤**

## å®é™…ç¼–è¯‘é”™è¯¯åˆ†æ

### âœ… Androidå¹³å°çŠ¶æ€
- **ç¼–è¯‘çŠ¶æ€**: æˆåŠŸ (BUILD SUCCESSFUL)
- **æ„å»ºæ—¶é—´**: 17ç§’
- **é”™è¯¯æ•°é‡**: 0ä¸ª

### ğŸ”´ æ ¸å¿ƒç¼–è¯‘é”™è¯¯ (åŸºäºå®é™…æµ‹è¯•)

#### 1. expect/actualæ¥å£å‚æ•°ä¸åŒ¹é… (iOS/JSå¹³å°)
**é”™è¯¯æ•°é‡**: 50+ä¸ªç¼–è¯‘é”™è¯¯
**ä¸»è¦æ–‡ä»¶**: 
- `UnifyPlatformAdapters.ios.kt`
- `UnifyPlatformAdapters.js.kt`

**å…·ä½“é”™è¯¯ç±»å‹**:
```
- 'actual fun' has no corresponding expected declaration
- Parameter types are different
- Number of value parameters is different
- Parameter names are different
- Unresolved reference 'PlatformButtonStyle'
- 'when' expression must be exhaustive
```

#### 2. commonMainä¸­ä½¿ç”¨å¹³å°ç‰¹å®šAPI (æ‰€æœ‰Nativeå¹³å°)
**é”™è¯¯æ•°é‡**: 30+ä¸ªç¼–è¯‘é”™è¯¯
**ä¸»è¦é—®é¢˜**:
```
- Unresolved reference 'System' (Javaç‰¹å®š)
- Unresolved reference 'Runtime' (Javaç‰¹å®š)
- Unresolved reference 'Math' (Javaç‰¹å®š)
- Unresolved reference 'Thread' (Javaç‰¹å®š)
- Unresolved reference 'format' (å¹³å°ç‰¹å®š)
- Unresolved reference 'javaClass' (Javaç‰¹å®š)
```

#### 3. iOSå¹³å°ç‰¹å®šAPIå¼•ç”¨é—®é¢˜
**é”™è¯¯æ•°é‡**: 10+ä¸ªç¼–è¯‘é”™è¯¯
**å…·ä½“é—®é¢˜**:
```
- Unresolved reference 'autoreleasepool'
- Unresolved reference 'NSProcessInfoThermalStateNominal'
- Unresolved reference 'timeIntervalSince1970'
```

#### 4. JSå¹³å°Date APIå¼•ç”¨é—®é¢˜
**é”™è¯¯æ•°é‡**: 5+ä¸ªç¼–è¯‘é”™è¯¯
**å…·ä½“é—®é¢˜**:
```
- Unresolved reference 'Date' (éœ€è¦kotlin.js.Date)
```

## ğŸ”§ åŸºäºäº‹å®çš„ä¿®å¤è®¡åˆ’

### é˜¶æ®µ1: ä¿®å¤expect/actualæ¥å£ä¸åŒ¹é… (ç´§æ€¥)
**é¢„è®¡æ—¶é—´**: 3-4å°æ—¶
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜

**å…·ä½“ä¿®å¤ä»»åŠ¡**:
1. **ä¿®å¤å¹³å°é€‚é…å™¨å‡½æ•°ç­¾åä¸åŒ¹é…**
   - ç»Ÿä¸€`UnifyPlatformButton`å‚æ•°: ç§»é™¤`style`å‚æ•°ï¼Œæ·»åŠ `enabled`å‚æ•°
   - ç»Ÿä¸€`UnifyPlatformTextField`å‚æ•°: ç§»é™¤`style`å‚æ•°ï¼Œæ·»åŠ `enabled`å‚æ•°
   - ç»Ÿä¸€`UnifyPlatformSwitch`å‚æ•°: æ·»åŠ `enabled`å‚æ•°
   - ç»Ÿä¸€`UnifyPlatformSlider`å‚æ•°: æ·»åŠ `enabled`å‚æ•°
   - ç»Ÿä¸€`UnifyPlatformAlert`å‚æ•°: ä¿®æ”¹ä¸º`onConfirm`å’Œ`onCancel`å›è°ƒ
   - ç»Ÿä¸€`UnifyPlatformActionSheet`å‚æ•°: ä¿®æ”¹ä¸ºç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨
   - ä¿®å¤`UnifyPlatformSegmentedControl`å‚æ•°å: `onSelectionChange` â†’ `onSelectionChanged`
   - ç»Ÿä¸€`UnifyPlatformDatePicker`å‚æ•°: æ·»åŠ `minDate`å’Œ`maxDate`å¯é€‰å‚æ•°

2. **æ·»åŠ ç¼ºå¤±çš„æ ·å¼æšä¸¾ç±»**
   - åœ¨commonMainä¸­å®šä¹‰`PlatformButtonStyle`æšä¸¾
   - åœ¨commonMainä¸­å®šä¹‰`PlatformTextFieldStyle`æšä¸¾
   - åœ¨commonMainä¸­å®šä¹‰`ActionSheetItemStyle`æšä¸¾

3. **ä¿®å¤whenè¡¨è¾¾å¼å®Œæ•´æ€§**
   - ä¸ºæ‰€æœ‰whenè¡¨è¾¾å¼æ·»åŠ elseåˆ†æ”¯

### é˜¶æ®µ2: ä¿®å¤commonMainä¸­çš„å¹³å°ç‰¹å®šAPIè°ƒç”¨ (ç´§æ€¥)
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜

**å…·ä½“ä¿®å¤ä»»åŠ¡**:
1. **æ›¿æ¢Javaç‰¹å®šAPIè°ƒç”¨**
   - `System.currentTimeMillis()` â†’ ä½¿ç”¨expect/actualæœºåˆ¶
   - `Runtime.getRuntime()` â†’ ä½¿ç”¨expect/actualæœºåˆ¶
   - `Math.sin/cos/PI` â†’ ä½¿ç”¨kotlin.mathåŒ…
   - `Thread.sleep()` â†’ ä½¿ç”¨kotlinx.coroutines.delay
   - `String.format()` â†’ ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿æˆ–expect/actual
   - `javaClass` â†’ ä½¿ç”¨expect/actualæœºåˆ¶

2. **åˆ›å»ºè·¨å¹³å°æ—¶é—´å’Œæ•°å­¦å·¥å…·**
   - åˆ›å»º`UnifyTimeUtils`çš„expect/actualå®ç°
   - åˆ›å»º`UnifyMathUtils`çš„expect/actualå®ç°
   - åˆ›å»º`UnifySystemUtils`çš„expect/actualå®ç°

### é˜¶æ®µ3: ä¿®å¤å¹³å°ç‰¹å®šAPIå¼•ç”¨é—®é¢˜ (é«˜)
**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜

**å…·ä½“ä¿®å¤ä»»åŠ¡**:
1. **ä¿®å¤iOSå¹³å°APIå¼•ç”¨**
   - æ·»åŠ æ­£ç¡®çš„Foundationæ¡†æ¶å¯¼å…¥
   - ä¿®å¤`autoreleasepool`ä½¿ç”¨æ–¹å¼
   - ä¿®å¤çƒ­çŠ¶æ€å¸¸é‡å¼•ç”¨
   - ä¿®å¤æ—¶é—´æˆ³è½¬æ¢API

2. **ä¿®å¤JSå¹³å°APIå¼•ç”¨**
   - æ·»åŠ `kotlin.js.Date`å¯¼å…¥
   - ä¿®å¤Performance APIä½¿ç”¨

### é˜¶æ®µ4: éªŒè¯æ‰€æœ‰å¹³å°ç¼–è¯‘ (é«˜)
**é¢„è®¡æ—¶é—´**: 1å°æ—¶
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜

**å…·ä½“éªŒè¯ä»»åŠ¡**:
1. **é€ä¸ªéªŒè¯å¹³å°ç¼–è¯‘**
   ```bash
   ./gradlew :shared:compileDebugKotlinAndroid  # âœ… å·²é€šè¿‡
   ./gradlew :shared:compileKotlinIosX64        # âŒ å¾…ä¿®å¤
   ./gradlew :shared:compileKotlinJs            # âŒ å¾…ä¿®å¤
   ./gradlew :shared:compileKotlinMacosX64      # âŒ å¾…ä¿®å¤
   ./gradlew :shared:compileKotlinLinuxX64      # å¾…æµ‹è¯•
   ./gradlew :shared:compileKotlinMingwX64      # å¾…æµ‹è¯•
   ```

2. **éªŒè¯HarmonyOSå’Œå…¶ä»–å¹³å°**
   ```bash
   ./gradlew :shared:compileKotlinHarmony       # å¾…æµ‹è¯•
   ```

## â° å®é™…ä¿®å¤æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|------|----------|---------|
| é˜¶æ®µ1 | expect/actualæ¥å£ä¸åŒ¹é…ä¿®å¤ | 3-4å°æ—¶ | â³ å¾…å¼€å§‹ |
| é˜¶æ®µ2 | commonMainå¹³å°ç‰¹å®šAPIä¿®å¤ | 2-3å°æ—¶ | â³ å¾…å¼€å§‹ |
| é˜¶æ®µ3 | å¹³å°ç‰¹å®šAPIå¼•ç”¨ä¿®å¤ | 1-2å°æ—¶ | â³ å¾…å¼€å§‹ |
| é˜¶æ®µ4 | æ‰€æœ‰å¹³å°ç¼–è¯‘éªŒè¯ | 1å°æ—¶ | â³ å¾…å¼€å§‹ |

**æ€»è®¡é¢„ä¼°æ—¶é—´**: 7-10å°æ—¶ (1-2ä¸ªå·¥ä½œæ—¥)

## ğŸ¯ æˆåŠŸæ ‡å‡† (åŸºäºå®é™…æµ‹è¯•)

### ç¼–è¯‘æˆåŠŸæ ‡å‡†
- [x] Androidå¹³å°ç¼–è¯‘é€šè¿‡ (0ä¸ªé”™è¯¯) âœ…
- [ ] iOSå¹³å°ç¼–è¯‘é€šè¿‡ (iosX64)
- [ ] Web/JSå¹³å°ç¼–è¯‘é€šè¿‡
- [ ] macOSå¹³å°ç¼–è¯‘é€šè¿‡ (macosX64)
- [ ] Linuxå¹³å°ç¼–è¯‘é€šè¿‡ (linuxX64)
- [ ] Windowså¹³å°ç¼–è¯‘é€šè¿‡ (mingwX64)
- [ ] HarmonyOSå¹³å°ç¼–è¯‘é€šè¿‡
- [ ] æ‰€æœ‰expect/actualæ¥å£åŒ¹é…
- [ ] æ„å»ºæ—¶é—´ < 10åˆ†é’Ÿ

### è´¨é‡æ ‡å‡†
- [ ] 0ä¸ªç¼–è¯‘é”™è¯¯
- [ ] 8å¤§å¹³å°æ„å»ºæˆåŠŸ
- [ ] expect/actualæ¥å£ä¸€è‡´æ€§100%
- [ ] commonMainæ— å¹³å°ç‰¹å®šAPIè°ƒç”¨
- [ ] æ‰€æœ‰å¹³å°ç‰¹å®šAPIæ­£ç¡®å¼•ç”¨

## âš ï¸ é£é™©è¯„ä¼° (åŸºäºå®é™…æƒ…å†µ)

### ğŸ”´ é«˜é£é™©
1. **expect/actualæ¥å£è®¾è®¡ä¸ä¸€è‡´**
   - å¤šä¸ªå¹³å°çš„actualå®ç°ä¸expectå£°æ˜ä¸åŒ¹é…
   - å½±å“: éœ€è¦å¤§é‡æ¥å£é‡æ„ï¼Œå¯èƒ½éœ€è¦4-6å°æ—¶

2. **commonMainæ¶æ„è®¾è®¡é—®é¢˜**
   - å¤§é‡ä½¿ç”¨Javaç‰¹å®šAPIï¼Œè¿åè·¨å¹³å°åŸåˆ™
   - å½±å“: éœ€è¦é‡æ–°è®¾è®¡å·¥å…·ç±»ï¼Œå¯èƒ½éœ€è¦3-4å°æ—¶

3. **å¹³å°ç‰¹å®šAPIä¾èµ–è¿‡å¤š**
   - iOSã€JSç­‰å¹³å°æœ‰å¤§é‡ç‰¹å®šAPIå¼•ç”¨é—®é¢˜
   - å½±å“: éœ€è¦é€ä¸ªå¹³å°é€‚é…ï¼Œå¯èƒ½éœ€è¦2-3å°æ—¶

### ğŸŸ¡ ä¸­é£é™©  
1. **æ„å»ºé…ç½®å¤æ‚æ€§**
   - 8å¤§å¹³å°çš„æ„å»ºé…ç½®å¯èƒ½å­˜åœ¨å…¶ä»–éšè—é—®é¢˜
   - å½±å“: å¯èƒ½éœ€è¦é¢å¤–è°ƒè¯•æ—¶é—´

2. **ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§**
   - Kotlin Multiplatformç‰ˆæœ¬ä¸æŸäº›APIå¯èƒ½ä¸å…¼å®¹
   - å½±å“: å¯èƒ½éœ€è¦é™çº§æˆ–å‡çº§ä¾èµ–

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³å¼€å§‹**: ä¿®å¤expect/actualæ¥å£ä¸åŒ¹é…é—®é¢˜ï¼Œä»å¹³å°é€‚é…å™¨å¼€å§‹
2. **é€æ­¥éªŒè¯**: ä¿®å¤ä¸€ä¸ªæ¨¡å—ç«‹å³æµ‹è¯•ç¼–è¯‘ï¼Œç¡®ä¿è¿›å±•
3. **ç³»ç»Ÿæ€§ä¿®å¤**: æŒ‰ä¼˜å…ˆçº§ä¿®å¤commonMainä¸­çš„å¹³å°ç‰¹å®šAPIè°ƒç”¨
4. **å…¨é¢éªŒè¯**: ç¡®ä¿æ‰€æœ‰8å¤§å¹³å°ç¼–è¯‘é€šè¿‡
5. **è®°å½•è¿›åº¦**: å®æ—¶æ›´æ–°ä¿®å¤çŠ¶æ€å’Œæ–°å‘ç°çš„é—®é¢˜

## ğŸ” é—®é¢˜æ ¹å› åˆ†æ

### ä¸ºä»€ä¹ˆä¹‹å‰ä¿®å¤è¿›å±•ç¼“æ…¢ï¼Ÿ
1. **é—®é¢˜å®šä½å®Œå…¨é”™è¯¯**: ä¹‹å‰è®¤ä¸ºAndroidç¼–è¯‘å¤±è´¥ï¼Œå®é™…ä¸ŠAndroidç¼–è¯‘æ­£å¸¸
2. **ç¼ºä¹å®é™…æµ‹è¯•éªŒè¯**: æ²¡æœ‰é€ä¸ªå¹³å°è¿›è¡Œç¼–è¯‘æµ‹è¯•ï¼Œå¯¼è‡´åˆ†æåŸºäºé”™è¯¯å‡è®¾
3. **æ¶æ„è®¾è®¡é—®é¢˜**: commonMainä¸­å¤§é‡ä½¿ç”¨Javaç‰¹å®šAPIï¼Œè¿åè·¨å¹³å°è®¾è®¡åŸåˆ™
4. **expect/actualæœºåˆ¶å®ç°ä¸å®Œæ•´**: å¹³å°é€‚é…å™¨çš„æ¥å£å®šä¹‰ä¸å®ç°ä¸¥é‡ä¸åŒ¹é…
5. **å¹³å°ç‰¹å®šAPIä½¿ç”¨é”™è¯¯**: iOSã€JSç­‰å¹³å°çš„APIå¼•ç”¨æ–¹å¼ä¸æ­£ç¡®

### æœ¬æ¬¡ä¿®å¤çš„æ”¹è¿›
1. **åŸºäºå®é™…ç¼–è¯‘æµ‹è¯•**: é€ä¸ªå¹³å°è¿›è¡Œç¼–è¯‘æµ‹è¯•ï¼Œè·å¾—çœŸå®é”™è¯¯ä¿¡æ¯
2. **ç³»ç»Ÿæ€§é—®é¢˜åˆ†æ**: è¯†åˆ«å‡ºexpect/actualä¸åŒ¹é…å’ŒcommonMainè®¾è®¡é—®é¢˜ä¸¤å¤§æ ¸å¿ƒé—®é¢˜
3. **ä¼˜å…ˆçº§æ˜ç¡®**: å…ˆä¿®å¤é˜»å¡æ€§çš„æ¥å£é—®é¢˜ï¼Œå†ä¿®å¤æ¶æ„é—®é¢˜
4. **éªŒè¯é©±åŠ¨**: æ¯ä¸ªä¿®å¤éƒ½ç«‹å³éªŒè¯ï¼Œç¡®ä¿çœŸå®è¿›å±•
5. **å…¨å¹³å°è¦†ç›–**: ç¡®ä¿8å¤§å¹³å°éƒ½èƒ½ç¼–è¯‘é€šè¿‡ï¼Œä¸é—æ¼ä»»ä½•å¹³å°

### æŠ€æœ¯å€ºåŠ¡è¯†åˆ«
1. **commonMainæ¶æ„é—®é¢˜**: éœ€è¦é‡æ–°è®¾è®¡è·¨å¹³å°å·¥å…·ç±»
2. **expect/actualæ¥å£è®¾è®¡**: éœ€è¦ç»Ÿä¸€æ‰€æœ‰å¹³å°çš„æ¥å£å®ç°
3. **å¹³å°ç‰¹å®šAPIå°è£…**: éœ€è¦æ­£ç¡®å°è£…å„å¹³å°çš„åŸç”ŸAPI

---

**å½“å‰çŠ¶æ€**: âœ… **Androidç¼–è¯‘æˆåŠŸ** | âŒ **iOS/JS/macOSç¼–è¯‘å¤±è´¥ï¼Œexpect/actualæ¥å£ä¸åŒ¹é…**  
**ä¸‹ä¸€æ­¥**: ç«‹å³ä¿®å¤å¹³å°é€‚é…å™¨çš„expect/actualæ¥å£ä¸åŒ¹é…é—®é¢˜  
**é¢„æœŸå®Œæˆ**: 1-2ä¸ªå·¥ä½œæ—¥å†…å®ç°æ‰€æœ‰8å¤§å¹³å°ç¼–è¯‘é€šè¿‡
